---
title: "MP2 Technical Report: "
author: "Katy Cummings, Tulip Daaboul, Michel Ruiz-Fuentes"
format: pdf
editor: visual
date: "`r Sys.Date()`"
---

## Introduction

The dairy industry is a cornerstone of the United State's agricultural domain, even going as far as being the state drink for twenty-two out of thirty states with official state beverages (Davis, 2021); however, over the last decade or so, dairy farmers and corporations have struggled to maintain a strong clientele. This change in the industry is predominantly due to the increase in alternative milk options, like almond milk and oat milk, and varying beliefs about the health benefits of dairy milk and human consumption. An article published by the New York Times in April 2023 further discusses this generational change and the impact this change has on a historically prosperous industry (Severson, 2023). There is a changing trend in the processing and manufacturing of dairy products that relies on static consumption. In particular, there is an expansion and growth in the dairy consumption of physical products. Individuals are eating more dairy-based products than drinking dairy-based products (Durrow, 2023).

This study is interested in how different ad contents (dairy vs oat milk) and sentiment types (positive, negative, and neutral ads) influence people's consumption of dairy or plant-based products. The two types of milk are whole milk and oat milk, as well as health benefits/cons regarding the milk type. The article that inspired the study emphasizes that there are many misconceptions by the younger generations pertaining to the health benefits of dairy products, like milk being less healthy than alternatives (Severson, 2023). Therefore, we hypothesize that the alternative hypothesis that "there is at least one difference in the mean rate of participants' consumption depending on the treatment they received" will be supported by our findings, rejecting the null hypothesis that "there is no difference in the mean rate of participants' consumption depending on the treatment they received."

## Methodology

Our project's experimental units consisted of thirty-five Smith College students. The study was a Qualtrics online survey that was distributed via an online link to current Smith students, predominantly from SDS 290. Due to this, the sample is a convenience sample, as those who took the survey came majority from our Research Design and Analysis class, other classes, and some of our student organizations on campus. Because the respondents came from a very specific demographic, we cannot generalize results to the Smith population. If random sampling was used, then, we would have been able to generalize to Smithies. 

Since participants were randomly assigned to the treatments, this study is an experiment. The two treatments are milk type and advertisement type. Participants were first assigned to either receive a dairy or plant based milk photo. Then, random assignment was used again and participants were either assigned to the positive, negative, or neutral group in respect to sentiment type. The type of sentiments were either positive or negative, and were presented through two bullet points for the product. The neutral group contains no bullet points, just the photo of the product.

The independent variables (experimental factors) in our study are categorical variables of milk type (two levels: whole or oat) and sentiment type (three levels: positive, negative, neutral). The dependent variable was average consumption, which is continuous. After being asked simple demographic questions, participants were asked if they were vegan or lactose intolerant. After seeing their treatment, participants rated on an ordinal scale from 1-5 (1 being least likely, 5 being most likely) on how many times a week they consume the type of milk they were shown. After completing this portion, participants rated on an ordinal scale their opinion on the dairy industry (1- dislike a great deal, 5 like a great deal). The purpose of the pre and post survey questions is to control for potential confounding variables. For our study, we are going to be using a two way ANOVA model to see if there is a true difference in average consumption based on ad contents and sentiment types. 

## Results

[**Load Data:**]{.underline}

```{r, LOADPKGE, warning=F, message=F, echo=FALSE}
library(tidyverse)
library(rio)
library(asbio)
library(dplyr)
library(ggplot2)
library(Stat2Data)
library(car)

milk_df1 <- import("milk_cleaned_data.csv")

milk_df1$milk_type <- as.factor(milk_df1$milk_type)
milk_df1$ad_type <- as.factor(milk_df1$ad_type)
milk_df1$treatment <- as.factor(milk_df1$treatment)
```

[**Condition Check 1 Symmetrical Distribution around Group Means**]{.underline}:

The box-plot below shows us the distribution of the average consumption on the different treatment combinations. We will compare the variation in the interquartile ranges of each treatment By looking at the plot, we can see that the constant variance condition is violated. We see that we do not have constant variance across groups and that the spread is not normal. However, checking conditions with visualizations can be tricky, so we can refer to Levene's test to also check our constant variance condition.

```{r, BOXPLOT, warning=F, message=F, fig.height = 3, fig.width = 6, fig.align = "center", echo=FALSE}
#BOX PLOT (constant variance)
milk_means <-
  ggplot(data=milk_df1, aes(x=average_consumption, y=treatment)) + 
  geom_boxplot(fill="steelblue3") + 
  stat_summary(fun="mean") + 
  labs(title ="Consumer Likelihood Box Plot",
      subtitle= "Assessing Distribution by Treatment",
      caption ="source: Qualtrics Milk Data") +
  xlab("Average Consumption") +
  ylab ("Treatment") + coord_flip()
milk_means
```

[**Levene's Test:**]{.underline}

```{r, LEVENET, warning=F, message=F, echo=FALSE}
leveneTest(average_consumption~treatment, data=milk_df1)
```

After conducting Levene's test of homogeneity of variance, we see that our p-value of 0.5326 is greater than 0.05. This means that we do not have statistically significant evidence that we have different variances, therefore constant variance condition is not violated.

[**Condition Check 2 Additive Effects & Transformation**]{.underline}:

```{r, TUKEYNA, warning=F, message=F, fig.height = 3, fig.width = 6, fig.align = "center", echo=FALSE}
TukeyNonaddPlot (average_consumption ~ ad_type + milk_type, data=milk_df1)
```

The Tukey Non-Additivity plot model helps us understand the relationship between the affect of both treatments over what we predicted. It also allows us to assess if the affects of treatments are additive or if there is some interaction. We want the relationship between the x-axis and y-axis to have a slope of 0 to indicate there is no relationship. However, because the data violates several assumptions and the slope is 2.7, so we must transform the data.

To diagnose the type of transformation we subtract 1-slope or 1-2.7 which gives the difference of -1.7. Because our P=-1.7, we must use a reciprocals transformation of 1/y.

```{r, TRANSFORM, warning=F, message=F, echo=FALSE}
#RECIPROCAL TRANSFORMATION
milk_df1$average_consumption_transformed <- (1/milk_df1$average_consumption)
```

```{r, TUKEY-TRANSFORMED, warning=F, message=F, echo=FALSE}
TukeyNonaddPlot (average_consumption_transformed ~ ad_type + milk_type, data=milk_df1)
```

After transforming our data, we see that although we are getting closer to that slope of 0, we are not quite there yet. This means that an interaction might still be better for this model.

[**Two-Way ANOVA Model**]{.underline}:

```{r, ANOVA, warning=F, message=F, echo=FALSE}
milk_anova <- aov(average_consumption~ad_type*milk_type, data=milk_df1) 
summary(milk_anova) 
```

The interaction model above shows us whether we have main effects for aD type, milk type, and if we have an interaction present.

Because our p-value for ad_type is 0.609 (greater than 0.05), we do not have statistically significant evidence that average consumption is different based on ad type. We do not have a main effect for ad type.

Because our p-value for milk_type is 0.686 (greater than 0.05), we do not have statistically significant evidence that average consumption is different based on milk type. We do not have a main effect for milk type.

When looking at our interaction effect, we see a p-value of 0.431. Because out p-value is greater than 0.431, we do not have statistically significant evidence that the effect of ad type is different based on the effect of milk type. We do not have statistically significant evidence that an interaction exists.

[**Independent residuals:**]{.underline}

```{r, RESVFIT1, warning=F, message=F, fig.height = 3, fig.width = 6, fig.align = "center", echo=FALSE}
plot(milk_anova, which = 1)
```

The residuals versus fitted plot can help us asses two patterns: non-linearity and non-constant spread. Because we see our residuals evenly spread out, we can say that our spread is constant. However, because our line does not fall on zero, non linearity is present here.

```{r, RESVFIT2, warning=F, message=F, fig.height = 3, fig.width = 6, fig.align = "center", echo=FALSE}
plot(milk_anova, which = 2)
```

We can use this normal quantile plot compares the standardized observed residuals with theoretical values from a normal distribution. This plot can help us determine whether our distribution is normal. Because we see that the residuals do not fall on the line, our distribution is not normal.

[**Confidence Intervals:**]{.underline}

```{r, LSD, warning=F, message=F, echo=FALSE}
#FISHERSLSD
milk_lsd <-
  pairw.anova(milk_df1$average_consumption, 
              interaction(milk_df1$milk_type,milk_df1$ad_type),
              method="lsd", 
              conf.level=.95)
milk_lsd
```

When conducting a pairwise comparison, Fishers LSD looks at the individual false alarm rate. This means it looks at the chance of a Type 1 error for a single test. Because our alpha level is 0.05, this means that for every error, those 0.05 error rates accumulate. Therefore, the Fishers LSD is the least conservative approach, meaning it is likely to reject the null hypothesis that the means of average consumption are the same. When looking at our pairwise comparisons, we see that all of the p-values are larger than 0.05. This means we do not have statistically significant evidence that the pairwise comparisons between the treatments are different using Fishers LSD.

```{r, BON, warning=F, message=F, echo=FALSE}
#BONFERONNI
milk_bonf <- 
  bonfCI(milk_df1$average_consumption, 
         interaction(milk_df1$milk_type,milk_df1$ad_type),
         conf.level = 0.95)

milk_bonf
```

The Bonferroni confidence intervals focuses on family wise false alarm rate. Meaning we look at the 0.05 error on *all* the tests we conduct and have an overall false alarm rate of 0.05. This approach is the most conservative and least likely to reject the null hypothesis. Again, based on all of our pairwise comparisons, all of the p-values are larger than 0.05. This means we do not have statistically significant evidence that the pairwise comparisons between the treatments are different using Bonferroni confidence intervals.

```{r, TUKEY, warning=F, message=F, echo=FALSE}
#TUKEYHSD()
milk_tukey <- TukeyHSD(milk_anova)
milk_tukey
```

Tukey HSD is the last pairwise comparison test that we will look at. Its level of strictness is somewhere in between Fishers LSD and Bonferonni. Similarly, when looking at our pairwise comparisons, we see that all of the p-values are larger than 0.05. We do not have statistically significant evidence that the pairwise comparisons between the treatments are different using Tukey HSD.

[**Descriptive Statistics & Effect Size**]{.underline}:

```{r, EFFECTSIZE, warning=F, message=F, echo=FALSE}
#TREATMENT GROUP STATS
milk_summary <- 
  milk_df1 |>
  group_by(treatment) |>
  summarise(group_mean=mean(average_consumption), 
            group_n=n(), 
            group_sd=sd(average_consumption),
            group_min= min(average_consumption),
            group_max= max(average_consumption))  
milk_summary

mse <- 1.6888 
SD <- sqrt(1.6888)
effect_size <- (1.71 - 1.5) / SD

mse
SD
effect_size
```

The output above shows us descriptive statistics of our milk data, and we can use it to calculate our effect size. To calculate effect size, we use the DairyPro (1.71) and DairyCon (1.5). This means \| 1.71-1.5 \| are divided by rad(1.6888) = 0.16. This represents a trivial effect based on Cohen's table.

[**R-Squared:**]{.underline}

Here, we see our different R squared values. An R squared value tells us the proportion of the variance in the dependent variable that can be explained by our independent variable. It tells us how well our data fits the model.

```{r, RSQUARED1, warning=F, message=F, echo=FALSE}
summary(milk_anova) 
r_ad<- 1.70/48.98
r_ad
```

So for our model, the ad type explains 3.47% of the variability in the participants average consumption of dairy or plant based products.

```{r, RSQUARED2, warning=F, message=F, echo=FALSE}
r_milk<-0.28/48.98
r_milk
```

The type of milk (dairy or oat) explains 0.57% of the variability in the participants average consumption of dairy or plant based products.

```{r, RSQUARED3, warning=F, message=F, echo=FALSE}
r_interaction<-2.92/48.98 
r_interaction
```

The interaction explains 5.96% of the variability in the participants average consumption of dairy or plant based products.

## Additional Analyses

[**Lactose Intolerant:**]{.underline}

```{r, LACTOSEINTOLERANT-PLOT, warning=F, message=F, echo=FALSE}
#lactose_plot <- ggplot(milk_df1, aes(y=__, x=__, color=__)) + geom_point()
```

[**Vegan or Not:**]{.underline}

```{r, VEGAN-PLOT, warning=F, message=F, echo=FALSE}

```

## Conclusion

Throughout this experimental design, we investigated how different ad contents (dairy vs oat milk) and sentiment types (positive, negative, and neutral ads) influence people's consumption of dairy or plant-based products. We ran a two-way ANOVA via an interaction model to assess if there are main effects for the ad type and milk type, and whether there was an interaction between the impacts of both experimental factors on the mean rate of participant's consumption of the milk product. We do not have statistically significant evidence that mean rate of participant's consumption differs based on neither ad type nor milk type. Therefore both experimental factors do not have a main effect.

The interaction model demonstrates that we do not have statistically significant evidence that the effect of ad type on the mean rate of participant's consumptionis different based on the effect of milk type, and vice versa. Additionally, the effect of milk type on the mean rate of participant's consumption is not different based on the effect of ad type. We do not have statistically significant evidence that an interaction exists between the ad type and milk type.

However, there are numerous reasons why we cannot accept these results as conclusive takeaways. Firstly, our data violates the constant variance and normality condition for the ANOVA model. Another limitation of our results is that we have yet to collect our data via random sampling to draw population inferences since our participants were only from SDS 290.
